<%
const id = work._id;
const body = JSON.parse(work.body);
const slug = body.slug;
const title = body.title;
const subtitle = body.subtitle;
const tag = body.tag;
const instrumentation = body.instrumentation;
const duration = body.duration;
const year = body.year;
const commission_en = body.commission_en;
const commission_zh = body.commission_zh;
const programNote_en = body.programNote_en;
const programNote_zh = body.programNote_zh;
const performanceNote_en = body.performanceNote_en;
const performanceNote_zh = body.performanceNote_zh;
const url = body.url;
%>

<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Yuxuan Lin | Dashboard | Edit Event</title>
		<%- include('../../partials/head') %>
	</head>

	<body class="dashboard">
		<%- include('../../partials/aside') %>
		<script>
			document.querySelector( 'aside .middle ul li:nth-child(2) a' )
				.classList.add( 'active' );
		</script>
		<main>
			<h1 class="secondary-header">Edit Work</h1>
			<a href="/work/<%= slug %>" class="edit-link" target="_blank">
				<%= slug %>
				<i class="fa-solid fa-up-right-from-square"></i>
			</a>
			<%- include('../../partials/form', {
        metadata: {
          method: 'put',
          action: '/dashboard/works/' + id,
          name: 'work'
        },
        fields: [
          { name: 'title', required: true, value: title },
          { type: 'hidden', name: 'slug' },
          { name: 'subtitle', value: subtitle },
          { tag: 'select', name: 'tag', options: ['Orchestral', 'Chamber', 'Solo', 'Dance', 'Choral'], value: tag },
          { name: 'instrumentation', label: 'detailed insturmentation (fl.cl...)', value: instrumentation },
          { name: 'duration', value: duration },
          { name: 'year', value: year },
          { tag: 'textarea', name: 'commission_en', label: 'commission information (EN)', value: commission_en },
          { tag: 'textarea', name: 'commission_zh', label: 'commission information (ZH)', value: commission_zh },
          { tag: 'textarea', name: 'programNote_en', label: 'program note (EN)', value: programNote_en },
          { tag: 'textarea', name: 'programNote_zh', label: 'program note (ZH)', value: programNote_zh },
          { tag: 'textarea', name: 'performanceNote_en', label: 'performance note (EN)', value: performanceNote_en },
          { tag: 'textarea', name: 'performanceNote_zh', label: 'performance note (ZH)', value: performanceNote_zh },
          { type: 'url', name: 'url', label: 'URL to purchase music', value: url }
        ]
      }) %>
		</main>
		<script src="/js/previewImage.js" defer></script>
	</body>

</html>